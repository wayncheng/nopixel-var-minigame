(this["webpackJsonpnopixel-var-minigame"]=this["webpackJsonpnopixel-var-minigame"]||[]).push([[0],{13:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var n=a(2),s=a.n(n),i=a(5),o=a.n(i),l=a(6),r=a(8),c=a(7),u=(a(13),a(1)),d=a(3),g=a.n(d),m=a(0);u.a.defaults({ease:"none",duration:3});var p=function(e){Object(r.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.setState({count:n.props.count})},n.generateItinerary=function(){for(var e=document.getElementById("boundary"),t=document.getElementById("tile-1"),a=e.offsetWidth,s=e.offsetHeight,i=a-t.offsetWidth,o=s-t.offsetHeight,l=n.props,r=l.maxDuration,c=l.minDuration,u=[],d=0;d<10;d++){var g=n.generateDestination(i,o,c,r);u.push(g)}var m=n.generateDestination(i,o,c,r),p=u.map((function(e){return e.duration})).reduce((function(e,t){return e+t}));return{data:u,start:m,totalDuration:p}},n.generateDestination=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,s={x:Math.round(e*Math.random()),y:Math.round(t*Math.random()),duration:u.a.utils.random(a,n,1)};return s},n.setItinerary=function(){for(var e=1;e<=n.state.count;e++){var t="#tile-".concat(e),a=u.a.timeline({autoRemoveChildren:!0,repeat:3,yoyo:!0}),s=n.generateItinerary(),i=s.data,o=s.start;u.a.set(t,o);for(var l=0;l<i.length;l++)a.to(t,i[l])}n.setState({stage:"learning",status:"",failed:!1,passed:!1,index:1})},n.handleTileClick=function(e){e.preventDefault();var t=e.target,a=parseInt(t.textContent);"postgame"!==n.state.stage&&(a===n.state.index&&a<n.state.count?(console.log("Correct"),n.setState({index:n.state.index+1})):a===n.state.index&&a===n.state.count?(console.log("Finished!"),u.a.globalTimeline.clear(),n.setState({passed:!0,stage:"postgame",status:"Passed"})):a>n.state.index?(console.log("Wrong"),u.a.globalTimeline.clear(),n.setState({failed:!0,stage:"postgame",status:"Failed"})):console.log("Repeat?"))},n.handleStartClick=function(e){e.preventDefault(),n.setItinerary();var t=setTimeout((function(){n.setState({stage:"playing"})}),1e3*n.props.learnDuration);n.setState({countdown:t})},n.handleCountChange=function(e){e.preventDefault();var t=e.target.value;n.reset(),n.setState({count:parseInt(t)})},n.reset=function(){console.log("=== RESET GAME ==>"),null!==n.state.countdown&&clearTimeout(n.state.countdown),n.setState({stage:"pregame",status:"",failed:!1,passed:!1,index:1,countdown:null}),u.a.globalTimeline.clear(),console.debug("globalTL children:",u.a.globalTimeline.getChildren())},n.render=function(){return Object(m.jsx)("div",{id:"app",className:g()("app",{"is-playing":"playing"===n.state.stage,"is-learning":"learning"===n.state.stage,"show-outlines":!0===n.state.showOutlines}),children:Object(m.jsxs)("main",{className:"container",children:[Object(m.jsx)("h1",{children:"NoPixel VAR Hacking Minigame"}),Object(m.jsxs)("div",{id:"boundary",className:"boundary",children:[Array(n.state.count).fill("\ud83d\ude0e").map((function(e,t){var a=t+1,s=n.state.count-t;return Object(m.jsx)("div",{id:"tile-".concat(a),onClick:n.handleTileClick,className:g()("tile",{correct:a<n.state.index||!0===n.state.passed}),style:{zIndex:s},children:a},a)})),Object(m.jsxs)("div",{className:g()("overlay",{hidden:"pregame"!==n.state.stage&&"postgame"!==n.state.stage}),children:[Object(m.jsxs)("div",{className:"marquee",children:[Object(m.jsx)("i",{className:"fas fa-user-secret"}),"postgame"===n.state.stage&&""!==n.state.status&&Object(m.jsx)("h2",{children:!0===n.state.passed?"Security Clearance Accepted":"Failed Security Clearance"}),"pregame"===n.state.stage&&Object(m.jsxs)(s.a.Fragment,{children:[Object(m.jsx)("h2",{children:"Finger Print Not Recognized"}),Object(m.jsx)("p",{children:"Proof of Training Required"})]})]}),Object(m.jsx)("button",{type:"button",id:"start",className:"btn start-btn",onClick:n.handleStartClick,children:"Play VAR"})]})]}),Object(m.jsxs)("aside",{id:"controls",className:"toolbar",children:[Object(m.jsxs)("div",{className:"control-group count-group",children:[Object(m.jsx)("input",{type:"number",name:"count",id:"count",value:n.state.count,onChange:n.handleCountChange}),Object(m.jsx)("label",{htmlFor:"count",children:"Number of Tiles"})]}),Object(m.jsxs)("div",{className:"control-group right-group",children:[Object(m.jsxs)("div",{className:g()("control-group test-group",{hidden:!n.state.showExperimental}),children:[Object(m.jsx)("button",{id:"outlines",className:"btn btn-blank",onClick:n.toggleOutlines,title:"Show outlines",children:Object(m.jsx)("i",{className:"fas fa-vector-square"})}),Object(m.jsxs)("div",{className:g()("control-group playback-group"),children:[Object(m.jsx)("button",{id:"resume",className:"btn btn-blank",onClick:n.handleResume,title:"Resume movement",children:Object(m.jsx)("i",{className:"fas fa-play"})}),Object(m.jsx)("button",{id:"pause",className:"btn btn-blank",onClick:n.handlePause,title:"Pause movement",children:Object(m.jsx)("i",{className:"fas fa-pause"})})]})]}),Object(m.jsx)("button",{className:"btn btn-blank",id:"toggle-exp",onClick:n.toggleExperimental,title:"Experimental features that could be unstable",children:Object(m.jsx)("i",{className:"fas fa-flask"})})]})]})]})})},n.toggleOutlines=function(e){e.preventDefault(),n.setState({showOutlines:!n.state.showOutlines})},n.toggleExperimental=function(e){e.preventDefault(),n.setState({showExperimental:!n.state.showExperimental})},n.handlePause=function(e){e.preventDefault(),u.a.globalTimeline.pause()},n.handleResume=function(e){e.preventDefault(),u.a.globalTimeline.resume()},n.state={index:1,failed:!1,passed:!1,stage:"pregame",status:"",count:6,countdown:null,showExperimental:!1,showOutlines:!1},n}return a}(n.Component),h=p;p.defaultProps={count:6,maxDuration:4,minDuration:2,learnDuration:3},o.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(h,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.52719ff1.chunk.js.map